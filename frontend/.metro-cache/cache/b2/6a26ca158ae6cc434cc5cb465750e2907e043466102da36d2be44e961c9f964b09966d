{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"date-fns","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":166},"end":{"line":4,"column":34,"index":200}}],"key":"ebLIABIqb+DSfRpTozlXmEt3BvY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useFicheStore\", {\n    enumerable: true,\n    get: function () {\n      return useFicheStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _dateFns = require(_dependencyMap[2], \"date-fns\");\n  const initialFiche = {\n    type: 'QualitÃ©',\n    date_evenement: new Date().toISOString(),\n    heure_evenement: (0, _dateFns.format)(new Date(), 'HH:mm'),\n    criticite: 'Mineure',\n    statut: 'Brouillon',\n    photos: [],\n    actions_correctives: [],\n    traitement_blocage: false,\n    traitement_methanisation: false,\n    traitement_fonte: false,\n    traitement_analyses: false,\n    traitement_alimentation_animale: false\n  };\n  const useFicheStore = (0, _zustand.create)((set, get) => ({\n    currentFiche: {\n      ...initialFiche\n    },\n    offlineFiches: [],\n    setCurrentFiche: fiche => set({\n      currentFiche: fiche\n    }),\n    updateCurrentFiche: updates => set(state => ({\n      currentFiche: {\n        ...state.currentFiche,\n        ...updates\n      }\n    })),\n    resetCurrentFiche: () => set({\n      currentFiche: {\n        ...initialFiche,\n        date_evenement: new Date().toISOString(),\n        heure_evenement: (0, _dateFns.format)(new Date(), 'HH:mm')\n      }\n    }),\n    addPhoto: photo => set(state => ({\n      currentFiche: {\n        ...state.currentFiche,\n        photos: [...(state.currentFiche.photos || []), photo]\n      }\n    })),\n    removePhoto: photoId => set(state => ({\n      currentFiche: {\n        ...state.currentFiche,\n        photos: (state.currentFiche.photos || []).filter(p => p.id !== photoId)\n      }\n    })),\n    addAction: action => set(state => ({\n      currentFiche: {\n        ...state.currentFiche,\n        actions_correctives: [...(state.currentFiche.actions_correctives || []), action]\n      }\n    })),\n    removeAction: index => set(state => ({\n      currentFiche: {\n        ...state.currentFiche,\n        actions_correctives: (state.currentFiche.actions_correctives || []).filter((_, i) => i !== index)\n      }\n    })),\n    saveOffline: async fiche => {\n      const fiches = get().offlineFiches;\n      const updated = [...fiches, fiche];\n      await AsyncStorage.default.setItem('offlineFiches', JSON.stringify(updated));\n      set({\n        offlineFiches: updated\n      });\n    },\n    loadOfflineFiches: async () => {\n      try {\n        const data = await AsyncStorage.default.getItem('offlineFiches');\n        if (data) {\n          set({\n            offlineFiches: JSON.parse(data)\n          });\n        }\n      } catch (e) {\n        console.error('Error loading offline fiches:', e);\n      }\n    },\n    removeOfflineFiche: async id => {\n      const fiches = get().offlineFiches.filter(f => f.id !== id);\n      await AsyncStorage.default.setItem('offlineFiches', JSON.stringify(fiches));\n      set({\n        offlineFiches: fiches\n      });\n    }\n  }));\n});","lineCount":109,"map":[[12,2,37,0,"Object"],[12,8,37,0],[12,9,37,0,"defineProperty"],[12,23,37,0],[12,24,37,0,"exports"],[12,31,37,0],[13,4,37,0,"enumerable"],[13,14,37,0],[14,4,37,0,"get"],[14,7,37,0],[14,18,37,0,"get"],[14,19,37,0],[15,6,37,0],[15,13,37,0,"useFicheStore"],[15,26,37,0],[16,4,37,0],[17,2,37,0],[18,2,1,0],[18,6,1,0,"_zustand"],[18,14,1,0],[18,17,1,0,"require"],[18,24,1,0],[18,25,1,0,"_dependencyMap"],[18,39,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,4,0],[21,6,4,0,"_dateFns"],[21,14,4,0],[21,17,4,0,"require"],[21,24,4,0],[21,25,4,0,"_dependencyMap"],[21,39,4,0],[22,2,22,0],[22,8,22,6,"initialFiche"],[22,20,22,37],[22,23,22,40],[23,4,23,2,"type"],[23,8,23,6],[23,10,23,8],[23,19,23,17],[24,4,24,2,"date_evenement"],[24,18,24,16],[24,20,24,18],[24,24,24,22,"Date"],[24,28,24,26],[24,29,24,27],[24,30,24,28],[24,31,24,29,"toISOString"],[24,42,24,40],[24,43,24,41],[24,44,24,42],[25,4,25,2,"heure_evenement"],[25,19,25,17],[25,21,25,19],[25,25,25,19,"format"],[25,33,25,25],[25,34,25,25,"format"],[25,40,25,25],[25,42,25,26],[25,46,25,30,"Date"],[25,50,25,34],[25,51,25,35],[25,52,25,36],[25,54,25,38],[25,61,25,45],[25,62,25,46],[26,4,26,2,"criticite"],[26,13,26,11],[26,15,26,13],[26,24,26,22],[27,4,27,2,"statut"],[27,10,27,8],[27,12,27,10],[27,23,27,21],[28,4,28,2,"photos"],[28,10,28,8],[28,12,28,10],[28,14,28,12],[29,4,29,2,"actions_correctives"],[29,23,29,21],[29,25,29,23],[29,27,29,25],[30,4,30,2,"traitement_blocage"],[30,22,30,20],[30,24,30,22],[30,29,30,27],[31,4,31,2,"traitement_methanisation"],[31,28,31,26],[31,30,31,28],[31,35,31,33],[32,4,32,2,"traitement_fonte"],[32,20,32,18],[32,22,32,20],[32,27,32,25],[33,4,33,2,"traitement_analyses"],[33,23,33,21],[33,25,33,23],[33,30,33,28],[34,4,34,2,"traitement_alimentation_animale"],[34,35,34,33],[34,37,34,35],[35,2,35,0],[35,3,35,1],[36,2,37,7],[36,8,37,13,"useFicheStore"],[36,21,37,26],[36,24,37,29],[36,28,37,29,"create"],[36,36,37,35],[36,37,37,35,"create"],[36,43,37,35],[36,45,37,48],[36,46,37,49,"set"],[36,49,37,52],[36,51,37,54,"get"],[36,54,37,57],[36,60,37,63],[37,4,38,2,"currentFiche"],[37,16,38,14],[37,18,38,16],[38,6,38,18],[38,9,38,21,"initialFiche"],[39,4,38,34],[39,5,38,35],[40,4,39,2,"offlineFiches"],[40,17,39,15],[40,19,39,17],[40,21,39,19],[41,4,41,2,"setCurrentFiche"],[41,19,41,17],[41,21,41,20,"fiche"],[41,26,41,25],[41,30,41,30,"set"],[41,33,41,33],[41,34,41,34],[42,6,41,36,"currentFiche"],[42,18,41,48],[42,20,41,50,"fiche"],[43,4,41,56],[43,5,41,57],[43,6,41,58],[44,4,43,2,"updateCurrentFiche"],[44,22,43,20],[44,24,43,23,"updates"],[44,31,43,30],[44,35,43,35,"set"],[44,38,43,38],[44,39,43,40,"state"],[44,44,43,45],[44,49,43,51],[45,6,44,4,"currentFiche"],[45,18,44,16],[45,20,44,18],[46,8,44,20],[46,11,44,23,"state"],[46,16,44,28],[46,17,44,29,"currentFiche"],[46,29,44,41],[47,8,44,43],[47,11,44,46,"updates"],[48,6,44,54],[49,4,45,2],[49,5,45,3],[49,6,45,4],[49,7,45,5],[50,4,47,2,"resetCurrentFiche"],[50,21,47,19],[50,23,47,21,"resetCurrentFiche"],[50,24,47,21],[50,29,47,27,"set"],[50,32,47,30],[50,33,47,31],[51,6,47,33,"currentFiche"],[51,18,47,45],[51,20,47,47],[52,8,47,49],[52,11,47,52,"initialFiche"],[52,23,47,64],[53,8,47,66,"date_evenement"],[53,22,47,80],[53,24,47,82],[53,28,47,86,"Date"],[53,32,47,90],[53,33,47,91],[53,34,47,92],[53,35,47,93,"toISOString"],[53,46,47,104],[53,47,47,105],[53,48,47,106],[54,8,47,108,"heure_evenement"],[54,23,47,123],[54,25,47,125],[54,29,47,125,"format"],[54,37,47,131],[54,38,47,131,"format"],[54,44,47,131],[54,46,47,132],[54,50,47,136,"Date"],[54,54,47,140],[54,55,47,141],[54,56,47,142],[54,58,47,144],[54,65,47,151],[55,6,47,153],[56,4,47,155],[56,5,47,156],[56,6,47,157],[57,4,49,2,"addPhoto"],[57,12,49,10],[57,14,49,13,"photo"],[57,19,49,18],[57,23,49,23,"set"],[57,26,49,26],[57,27,49,28,"state"],[57,32,49,33],[57,37,49,39],[58,6,50,4,"currentFiche"],[58,18,50,16],[58,20,50,18],[59,8,51,6],[59,11,51,9,"state"],[59,16,51,14],[59,17,51,15,"currentFiche"],[59,29,51,27],[60,8,52,6,"photos"],[60,14,52,12],[60,16,52,14],[60,17,52,15],[60,21,52,19,"state"],[60,26,52,24],[60,27,52,25,"currentFiche"],[60,39,52,37],[60,40,52,38,"photos"],[60,46,52,44],[60,50,52,48],[60,52,52,50],[60,53,52,51],[60,55,52,53,"photo"],[60,60,52,58],[61,6,53,4],[62,4,54,2],[62,5,54,3],[62,6,54,4],[62,7,54,5],[63,4,56,2,"removePhoto"],[63,15,56,13],[63,17,56,16,"photoId"],[63,24,56,23],[63,28,56,28,"set"],[63,31,56,31],[63,32,56,33,"state"],[63,37,56,38],[63,42,56,44],[64,6,57,4,"currentFiche"],[64,18,57,16],[64,20,57,18],[65,8,58,6],[65,11,58,9,"state"],[65,16,58,14],[65,17,58,15,"currentFiche"],[65,29,58,27],[66,8,59,6,"photos"],[66,14,59,12],[66,16,59,14],[66,17,59,15,"state"],[66,22,59,20],[66,23,59,21,"currentFiche"],[66,35,59,33],[66,36,59,34,"photos"],[66,42,59,40],[66,46,59,44],[66,48,59,46],[66,50,59,48,"filter"],[66,56,59,54],[66,57,59,55,"p"],[66,58,59,56],[66,62,59,60,"p"],[66,63,59,61],[66,64,59,62,"id"],[66,66,59,64],[66,71,59,69,"photoId"],[66,78,59,76],[67,6,60,4],[68,4,61,2],[68,5,61,3],[68,6,61,4],[68,7,61,5],[69,4,63,2,"addAction"],[69,13,63,11],[69,15,63,14,"action"],[69,21,63,20],[69,25,63,25,"set"],[69,28,63,28],[69,29,63,30,"state"],[69,34,63,35],[69,39,63,41],[70,6,64,4,"currentFiche"],[70,18,64,16],[70,20,64,18],[71,8,65,6],[71,11,65,9,"state"],[71,16,65,14],[71,17,65,15,"currentFiche"],[71,29,65,27],[72,8,66,6,"actions_correctives"],[72,27,66,25],[72,29,66,27],[72,30,66,28],[72,34,66,32,"state"],[72,39,66,37],[72,40,66,38,"currentFiche"],[72,52,66,50],[72,53,66,51,"actions_correctives"],[72,72,66,70],[72,76,66,74],[72,78,66,76],[72,79,66,77],[72,81,66,79,"action"],[72,87,66,85],[73,6,67,4],[74,4,68,2],[74,5,68,3],[74,6,68,4],[74,7,68,5],[75,4,70,2,"removeAction"],[75,16,70,14],[75,18,70,17,"index"],[75,23,70,22],[75,27,70,27,"set"],[75,30,70,30],[75,31,70,32,"state"],[75,36,70,37],[75,41,70,43],[76,6,71,4,"currentFiche"],[76,18,71,16],[76,20,71,18],[77,8,72,6],[77,11,72,9,"state"],[77,16,72,14],[77,17,72,15,"currentFiche"],[77,29,72,27],[78,8,73,6,"actions_correctives"],[78,27,73,25],[78,29,73,27],[78,30,73,28,"state"],[78,35,73,33],[78,36,73,34,"currentFiche"],[78,48,73,46],[78,49,73,47,"actions_correctives"],[78,68,73,66],[78,72,73,70],[78,74,73,72],[78,76,73,74,"filter"],[78,82,73,80],[78,83,73,81],[78,84,73,82,"_"],[78,85,73,83],[78,87,73,85,"i"],[78,88,73,86],[78,93,73,91,"i"],[78,94,73,92],[78,99,73,97,"index"],[78,104,73,102],[79,6,74,4],[80,4,75,2],[80,5,75,3],[80,6,75,4],[80,7,75,5],[81,4,77,2,"saveOffline"],[81,15,77,13],[81,17,77,15],[81,23,77,22,"fiche"],[81,28,77,27],[81,32,77,32],[82,6,78,4],[82,12,78,10,"fiches"],[82,18,78,16],[82,21,78,19,"get"],[82,24,78,22],[82,25,78,23],[82,26,78,24],[82,27,78,25,"offlineFiches"],[82,40,78,38],[83,6,79,4],[83,12,79,10,"updated"],[83,19,79,17],[83,22,79,20],[83,23,79,21],[83,26,79,24,"fiches"],[83,32,79,30],[83,34,79,32,"fiche"],[83,39,79,37],[83,40,79,38],[84,6,80,4],[84,12,80,10,"AsyncStorage"],[84,24,80,22],[84,25,80,22,"default"],[84,32,80,22],[84,33,80,23,"setItem"],[84,40,80,30],[84,41,80,31],[84,56,80,46],[84,58,80,48,"JSON"],[84,62,80,52],[84,63,80,53,"stringify"],[84,72,80,62],[84,73,80,63,"updated"],[84,80,80,70],[84,81,80,71],[84,82,80,72],[85,6,81,4,"set"],[85,9,81,7],[85,10,81,8],[86,8,81,10,"offlineFiches"],[86,21,81,23],[86,23,81,25,"updated"],[87,6,81,33],[87,7,81,34],[87,8,81,35],[88,4,82,2],[88,5,82,3],[89,4,84,2,"loadOfflineFiches"],[89,21,84,19],[89,23,84,21],[89,29,84,21,"loadOfflineFiches"],[89,30,84,21],[89,35,84,33],[90,6,85,4],[90,10,85,8],[91,8,86,6],[91,14,86,12,"data"],[91,18,86,16],[91,21,86,19],[91,27,86,25,"AsyncStorage"],[91,39,86,37],[91,40,86,37,"default"],[91,47,86,37],[91,48,86,38,"getItem"],[91,55,86,45],[91,56,86,46],[91,71,86,61],[91,72,86,62],[92,8,87,6],[92,12,87,10,"data"],[92,16,87,14],[92,18,87,16],[93,10,88,8,"set"],[93,13,88,11],[93,14,88,12],[94,12,88,14,"offlineFiches"],[94,25,88,27],[94,27,88,29,"JSON"],[94,31,88,33],[94,32,88,34,"parse"],[94,37,88,39],[94,38,88,40,"data"],[94,42,88,44],[95,10,88,46],[95,11,88,47],[95,12,88,48],[96,8,89,6],[97,6,90,4],[97,7,90,5],[97,8,90,6],[97,15,90,13,"e"],[97,16,90,14],[97,18,90,16],[98,8,91,6,"console"],[98,15,91,13],[98,16,91,14,"error"],[98,21,91,19],[98,22,91,20],[98,53,91,51],[98,55,91,53,"e"],[98,56,91,54],[98,57,91,55],[99,6,92,4],[100,4,93,2],[100,5,93,3],[101,4,95,2,"removeOfflineFiche"],[101,22,95,20],[101,24,95,22],[101,30,95,29,"id"],[101,32,95,31],[101,36,95,36],[102,6,96,4],[102,12,96,10,"fiches"],[102,18,96,16],[102,21,96,19,"get"],[102,24,96,22],[102,25,96,23],[102,26,96,24],[102,27,96,25,"offlineFiches"],[102,40,96,38],[102,41,96,39,"filter"],[102,47,96,45],[102,48,96,46,"f"],[102,49,96,47],[102,53,96,51,"f"],[102,54,96,52],[102,55,96,53,"id"],[102,57,96,55],[102,62,96,60,"id"],[102,64,96,62],[102,65,96,63],[103,6,97,4],[103,12,97,10,"AsyncStorage"],[103,24,97,22],[103,25,97,22,"default"],[103,32,97,22],[103,33,97,23,"setItem"],[103,40,97,30],[103,41,97,31],[103,56,97,46],[103,58,97,48,"JSON"],[103,62,97,52],[103,63,97,53,"stringify"],[103,72,97,62],[103,73,97,63,"fiches"],[103,79,97,69],[103,80,97,70],[103,81,97,71],[104,6,98,4,"set"],[104,9,98,7],[104,10,98,8],[105,8,98,10,"offlineFiches"],[105,21,98,23],[105,23,98,25,"fiches"],[106,6,98,32],[106,7,98,33],[106,8,98,34],[107,4,99,2],[108,2,100,0],[108,3,100,1],[108,4,100,2],[108,5,100,3],[109,0,100,4],[109,3]],"functionMap":{"names":["<global>","create$argument_0","setCurrentFiche","updateCurrentFiche","set$argument_0","resetCurrentFiche","addPhoto","removePhoto","filter$argument_0","addAction","removeAction","saveOffline","loadOfflineFiches","removeOfflineFiche","get.offlineFiches.filter$argument_0"],"mappings":"AAA;gDCoC;mBCI,uCD;sBEE,iBC;IDE,CF;qBIE,wIJ;YKE,eF;IEK,CL;eME,iBH;uDIG,qBJ;IGE,CN;aQE,gBL;IKK,CR;gBSE,eN;iFIG,qBJ;IME,CT;eUE;GVK;qBWE;GXS;sBYE;8CCC,gBD;GZG;EDC"},"hasCjsExports":false},"type":"js/module"}]}