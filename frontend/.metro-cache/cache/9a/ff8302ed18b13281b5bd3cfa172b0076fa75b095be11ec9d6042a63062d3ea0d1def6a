{"dependencies":[{"name":"./rng.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":27,"index":27}}],"key":"GJimBYuDDd6EeueloFHQJIiIo5Y=","exportNames":["*"],"imports":1}},{"name":"./stringify.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":28},"end":{"line":2,"column":49,"index":77}}],"key":"X1ch7bs3UUIXmGFY4ypSSY/7qNo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  exports.updateV7State = updateV7State;\n  var _rngJs = require(_dependencyMap[0], \"./rng.js\");\n  var rng = _interopDefault(_rngJs);\n  var _stringifyJs = require(_dependencyMap[1], \"./stringify.js\");\n  const _state = {};\n  function v7(options, buf, offset) {\n    let bytes;\n    if (options) {\n      bytes = v7Bytes(options.random ?? options.rng?.() ?? (0, rng.default)(), options.msecs, options.seq, buf, offset);\n    } else {\n      const now = Date.now();\n      const rnds = (0, rng.default)();\n      updateV7State(_state, now, rnds);\n      bytes = v7Bytes(rnds, _state.msecs, _state.seq, buf, offset);\n    }\n    return buf ?? (0, _stringifyJs.unsafeStringify)(bytes);\n  }\n  function updateV7State(state, now, rnds) {\n    state.msecs ??= -Infinity;\n    state.seq ??= 0;\n    if (now > state.msecs) {\n      state.seq = rnds[6] << 23 | rnds[7] << 16 | rnds[8] << 8 | rnds[9];\n      state.msecs = now;\n    } else {\n      state.seq = state.seq + 1 | 0;\n      if (state.seq === 0) {\n        state.msecs++;\n      }\n    }\n    return state;\n  }\n  function v7Bytes(rnds, msecs, seq, buf, offset = 0) {\n    if (rnds.length < 16) {\n      throw new Error('Random bytes length must be >= 16');\n    }\n    if (!buf) {\n      buf = new Uint8Array(16);\n      offset = 0;\n    } else {\n      if (offset < 0 || offset + 16 > buf.length) {\n        throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n      }\n    }\n    msecs ??= Date.now();\n    seq ??= rnds[6] * 0x7f << 24 | rnds[7] << 16 | rnds[8] << 8 | rnds[9];\n    buf[offset++] = msecs / 0x10000000000 & 0xff;\n    buf[offset++] = msecs / 0x100000000 & 0xff;\n    buf[offset++] = msecs / 0x1000000 & 0xff;\n    buf[offset++] = msecs / 0x10000 & 0xff;\n    buf[offset++] = msecs / 0x100 & 0xff;\n    buf[offset++] = msecs & 0xff;\n    buf[offset++] = 0x70 | seq >>> 28 & 0x0f;\n    buf[offset++] = seq >>> 20 & 0xff;\n    buf[offset++] = 0x80 | seq >>> 14 & 0x3f;\n    buf[offset++] = seq >>> 6 & 0xff;\n    buf[offset++] = seq << 2 & 0xff | rnds[10] & 0x03;\n    buf[offset++] = rnds[11];\n    buf[offset++] = rnds[12];\n    buf[offset++] = rnds[13];\n    buf[offset++] = rnds[14];\n    buf[offset++] = rnds[15];\n    return buf;\n  }\n  var _default = v7;\n});","lineCount":82,"map":[[12,2,65,0,"Object"],[12,8,65,0],[12,9,65,0,"defineProperty"],[12,23,65,0],[12,24,65,0,"exports"],[12,31,65,0],[13,4,65,0,"enumerable"],[13,14,65,0],[14,4,65,0,"get"],[14,7,65,0],[14,18,65,0,"get"],[14,19,65,0],[15,6,65,0],[15,13,65,0,"_default"],[15,21,65,0],[16,4,65,0],[17,2,65,0],[18,2,17,0,"exports"],[18,9,17,0],[18,10,17,0,"updateV7State"],[18,23,17,0],[18,26,17,0,"updateV7State"],[18,39,17,0],[19,2,1,0],[19,6,1,0,"_rngJs"],[19,12,1,0],[19,15,1,0,"require"],[19,22,1,0],[19,23,1,0,"_dependencyMap"],[19,37,1,0],[20,2,1,0],[20,6,1,0,"rng"],[20,9,1,0],[20,12,1,0,"_interopDefault"],[20,27,1,0],[20,28,1,0,"_rngJs"],[20,34,1,0],[21,2,2,0],[21,6,2,0,"_stringifyJs"],[21,18,2,0],[21,21,2,0,"require"],[21,28,2,0],[21,29,2,0,"_dependencyMap"],[21,43,2,0],[22,2,3,0],[22,8,3,6,"_state"],[22,14,3,12],[22,17,3,15],[22,18,3,16],[22,19,3,17],[23,2,4,0],[23,11,4,9,"v7"],[23,13,4,11,"v7"],[23,14,4,12,"options"],[23,21,4,19],[23,23,4,21,"buf"],[23,26,4,24],[23,28,4,26,"offset"],[23,34,4,32],[23,36,4,34],[24,4,5,4],[24,8,5,8,"bytes"],[24,13,5,13],[25,4,6,4],[25,8,6,8,"options"],[25,15,6,15],[25,17,6,17],[26,6,7,8,"bytes"],[26,11,7,13],[26,14,7,16,"v7Bytes"],[26,21,7,23],[26,22,7,24,"options"],[26,29,7,31],[26,30,7,32,"random"],[26,36,7,38],[26,40,7,42,"options"],[26,47,7,49],[26,48,7,50,"rng"],[26,51,7,53],[26,54,7,56],[26,55,7,57],[26,59,7,61],[26,63,7,61,"rng"],[26,66,7,64],[26,67,7,64,"default"],[26,74,7,64],[26,76,7,65],[26,77,7,66],[26,79,7,68,"options"],[26,86,7,75],[26,87,7,76,"msecs"],[26,92,7,81],[26,94,7,83,"options"],[26,101,7,90],[26,102,7,91,"seq"],[26,105,7,94],[26,107,7,96,"buf"],[26,110,7,99],[26,112,7,101,"offset"],[26,118,7,107],[26,119,7,108],[27,4,8,4],[27,5,8,5],[27,11,9,9],[28,6,10,8],[28,12,10,14,"now"],[28,15,10,17],[28,18,10,20,"Date"],[28,22,10,24],[28,23,10,25,"now"],[28,26,10,28],[28,27,10,29],[28,28,10,30],[29,6,11,8],[29,12,11,14,"rnds"],[29,16,11,18],[29,19,11,21],[29,23,11,21,"rng"],[29,26,11,24],[29,27,11,24,"default"],[29,34,11,24],[29,36,11,25],[29,37,11,26],[30,6,12,8,"updateV7State"],[30,19,12,21],[30,20,12,22,"_state"],[30,26,12,28],[30,28,12,30,"now"],[30,31,12,33],[30,33,12,35,"rnds"],[30,37,12,39],[30,38,12,40],[31,6,13,8,"bytes"],[31,11,13,13],[31,14,13,16,"v7Bytes"],[31,21,13,23],[31,22,13,24,"rnds"],[31,26,13,28],[31,28,13,30,"_state"],[31,34,13,36],[31,35,13,37,"msecs"],[31,40,13,42],[31,42,13,44,"_state"],[31,48,13,50],[31,49,13,51,"seq"],[31,52,13,54],[31,54,13,56,"buf"],[31,57,13,59],[31,59,13,61,"offset"],[31,65,13,67],[31,66,13,68],[32,4,14,4],[33,4,15,4],[33,11,15,11,"buf"],[33,14,15,14],[33,18,15,18],[33,22,15,18,"unsafeStringify"],[33,34,15,33],[33,35,15,33,"unsafeStringify"],[33,50,15,33],[33,52,15,34,"bytes"],[33,57,15,39],[33,58,15,40],[34,2,16,0],[35,2,17,7],[35,11,17,16,"updateV7State"],[35,24,17,29,"updateV7State"],[35,25,17,30,"state"],[35,30,17,35],[35,32,17,37,"now"],[35,35,17,40],[35,37,17,42,"rnds"],[35,41,17,46],[35,43,17,48],[36,4,18,4,"state"],[36,9,18,9],[36,10,18,10,"msecs"],[36,15,18,15],[36,20,18,20],[36,21,18,21,"Infinity"],[36,29,18,29],[37,4,19,4,"state"],[37,9,19,9],[37,10,19,10,"seq"],[37,13,19,13],[37,18,19,18],[37,19,19,19],[38,4,20,4],[38,8,20,8,"now"],[38,11,20,11],[38,14,20,14,"state"],[38,19,20,19],[38,20,20,20,"msecs"],[38,25,20,25],[38,27,20,27],[39,6,21,8,"state"],[39,11,21,13],[39,12,21,14,"seq"],[39,15,21,17],[39,18,21,21,"rnds"],[39,22,21,25],[39,23,21,26],[39,24,21,27],[39,25,21,28],[39,29,21,32],[39,31,21,34],[39,34,21,39,"rnds"],[39,38,21,43],[39,39,21,44],[39,40,21,45],[39,41,21,46],[39,45,21,50],[39,47,21,53],[39,50,21,57,"rnds"],[39,54,21,61],[39,55,21,62],[39,56,21,63],[39,57,21,64],[39,61,21,68],[39,62,21,70],[39,65,21,73,"rnds"],[39,69,21,77],[39,70,21,78],[39,71,21,79],[39,72,21,80],[40,6,22,8,"state"],[40,11,22,13],[40,12,22,14,"msecs"],[40,17,22,19],[40,20,22,22,"now"],[40,23,22,25],[41,4,23,4],[41,5,23,5],[41,11,24,9],[42,6,25,8,"state"],[42,11,25,13],[42,12,25,14,"seq"],[42,15,25,17],[42,18,25,21,"state"],[42,23,25,26],[42,24,25,27,"seq"],[42,27,25,30],[42,30,25,33],[42,31,25,34],[42,34,25,38],[42,35,25,39],[43,6,26,8],[43,10,26,12,"state"],[43,15,26,17],[43,16,26,18,"seq"],[43,19,26,21],[43,24,26,26],[43,25,26,27],[43,27,26,29],[44,8,27,12,"state"],[44,13,27,17],[44,14,27,18,"msecs"],[44,19,27,23],[44,21,27,25],[45,6,28,8],[46,4,29,4],[47,4,30,4],[47,11,30,11,"state"],[47,16,30,16],[48,2,31,0],[49,2,32,0],[49,11,32,9,"v7Bytes"],[49,18,32,16,"v7Bytes"],[49,19,32,17,"rnds"],[49,23,32,21],[49,25,32,23,"msecs"],[49,30,32,28],[49,32,32,30,"seq"],[49,35,32,33],[49,37,32,35,"buf"],[49,40,32,38],[49,42,32,40,"offset"],[49,48,32,46],[49,51,32,49],[49,52,32,50],[49,54,32,52],[50,4,33,4],[50,8,33,8,"rnds"],[50,12,33,12],[50,13,33,13,"length"],[50,19,33,19],[50,22,33,22],[50,24,33,24],[50,26,33,26],[51,6,34,8],[51,12,34,14],[51,16,34,18,"Error"],[51,21,34,23],[51,22,34,24],[51,57,34,59],[51,58,34,60],[52,4,35,4],[53,4,36,4],[53,8,36,8],[53,9,36,9,"buf"],[53,12,36,12],[53,14,36,14],[54,6,37,8,"buf"],[54,9,37,11],[54,12,37,14],[54,16,37,18,"Uint8Array"],[54,26,37,28],[54,27,37,29],[54,29,37,31],[54,30,37,32],[55,6,38,8,"offset"],[55,12,38,14],[55,15,38,17],[55,16,38,18],[56,4,39,4],[56,5,39,5],[56,11,40,9],[57,6,41,8],[57,10,41,12,"offset"],[57,16,41,18],[57,19,41,21],[57,20,41,22],[57,24,41,26,"offset"],[57,30,41,32],[57,33,41,35],[57,35,41,37],[57,38,41,40,"buf"],[57,41,41,43],[57,42,41,44,"length"],[57,48,41,50],[57,50,41,52],[58,8,42,12],[58,14,42,18],[58,18,42,22,"RangeError"],[58,28,42,32],[58,29,42,33],[58,48,42,52,"offset"],[58,54,42,58],[58,58,42,62,"offset"],[58,64,42,68],[58,67,42,71],[58,69,42,73],[58,95,42,99],[58,96,42,100],[59,6,43,8],[60,4,44,4],[61,4,45,4,"msecs"],[61,9,45,9],[61,14,45,14,"Date"],[61,18,45,18],[61,19,45,19,"now"],[61,22,45,22],[61,23,45,23],[61,24,45,24],[62,4,46,4,"seq"],[62,7,46,7],[62,12,46,14,"rnds"],[62,16,46,18],[62,17,46,19],[62,18,46,20],[62,19,46,21],[62,22,46,24],[62,26,46,28],[62,30,46,33],[62,32,46,35],[62,35,46,40,"rnds"],[62,39,46,44],[62,40,46,45],[62,41,46,46],[62,42,46,47],[62,46,46,51],[62,48,46,54],[62,51,46,58,"rnds"],[62,55,46,62],[62,56,46,63],[62,57,46,64],[62,58,46,65],[62,62,46,69],[62,63,46,71],[62,66,46,74,"rnds"],[62,70,46,78],[62,71,46,79],[62,72,46,80],[62,73,46,81],[63,4,47,4,"buf"],[63,7,47,7],[63,8,47,8,"offset"],[63,14,47,14],[63,16,47,16],[63,17,47,17],[63,20,47,21,"msecs"],[63,25,47,26],[63,28,47,29],[63,41,47,42],[63,44,47,46],[63,48,47,50],[64,4,48,4,"buf"],[64,7,48,7],[64,8,48,8,"offset"],[64,14,48,14],[64,16,48,16],[64,17,48,17],[64,20,48,21,"msecs"],[64,25,48,26],[64,28,48,29],[64,39,48,40],[64,42,48,44],[64,46,48,48],[65,4,49,4,"buf"],[65,7,49,7],[65,8,49,8,"offset"],[65,14,49,14],[65,16,49,16],[65,17,49,17],[65,20,49,21,"msecs"],[65,25,49,26],[65,28,49,29],[65,37,49,38],[65,40,49,42],[65,44,49,46],[66,4,50,4,"buf"],[66,7,50,7],[66,8,50,8,"offset"],[66,14,50,14],[66,16,50,16],[66,17,50,17],[66,20,50,21,"msecs"],[66,25,50,26],[66,28,50,29],[66,35,50,36],[66,38,50,40],[66,42,50,44],[67,4,51,4,"buf"],[67,7,51,7],[67,8,51,8,"offset"],[67,14,51,14],[67,16,51,16],[67,17,51,17],[67,20,51,21,"msecs"],[67,25,51,26],[67,28,51,29],[67,33,51,34],[67,36,51,38],[67,40,51,42],[68,4,52,4,"buf"],[68,7,52,7],[68,8,52,8,"offset"],[68,14,52,14],[68,16,52,16],[68,17,52,17],[68,20,52,20,"msecs"],[68,25,52,25],[68,28,52,28],[68,32,52,32],[69,4,53,4,"buf"],[69,7,53,7],[69,8,53,8,"offset"],[69,14,53,14],[69,16,53,16],[69,17,53,17],[69,20,53,20],[69,24,53,24],[69,27,53,29,"seq"],[69,30,53,32],[69,35,53,37],[69,37,53,39],[69,40,53,43],[69,44,53,48],[70,4,54,4,"buf"],[70,7,54,7],[70,8,54,8,"offset"],[70,14,54,14],[70,16,54,16],[70,17,54,17],[70,20,54,21,"seq"],[70,23,54,24],[70,28,54,29],[70,30,54,31],[70,33,54,35],[70,37,54,39],[71,4,55,4,"buf"],[71,7,55,7],[71,8,55,8,"offset"],[71,14,55,14],[71,16,55,16],[71,17,55,17],[71,20,55,20],[71,24,55,24],[71,27,55,29,"seq"],[71,30,55,32],[71,35,55,37],[71,37,55,39],[71,40,55,43],[71,44,55,48],[72,4,56,4,"buf"],[72,7,56,7],[72,8,56,8,"offset"],[72,14,56,14],[72,16,56,16],[72,17,56,17],[72,20,56,21,"seq"],[72,23,56,24],[72,28,56,29],[72,29,56,30],[72,32,56,34],[72,36,56,38],[73,4,57,4,"buf"],[73,7,57,7],[73,8,57,8,"offset"],[73,14,57,14],[73,16,57,16],[73,17,57,17],[73,20,57,22,"seq"],[73,23,57,25],[73,27,57,29],[73,28,57,30],[73,31,57,34],[73,35,57,38],[73,38,57,43,"rnds"],[73,42,57,47],[73,43,57,48],[73,45,57,50],[73,46,57,51],[73,49,57,54],[73,53,57,59],[74,4,58,4,"buf"],[74,7,58,7],[74,8,58,8,"offset"],[74,14,58,14],[74,16,58,16],[74,17,58,17],[74,20,58,20,"rnds"],[74,24,58,24],[74,25,58,25],[74,27,58,27],[74,28,58,28],[75,4,59,4,"buf"],[75,7,59,7],[75,8,59,8,"offset"],[75,14,59,14],[75,16,59,16],[75,17,59,17],[75,20,59,20,"rnds"],[75,24,59,24],[75,25,59,25],[75,27,59,27],[75,28,59,28],[76,4,60,4,"buf"],[76,7,60,7],[76,8,60,8,"offset"],[76,14,60,14],[76,16,60,16],[76,17,60,17],[76,20,60,20,"rnds"],[76,24,60,24],[76,25,60,25],[76,27,60,27],[76,28,60,28],[77,4,61,4,"buf"],[77,7,61,7],[77,8,61,8,"offset"],[77,14,61,14],[77,16,61,16],[77,17,61,17],[77,20,61,20,"rnds"],[77,24,61,24],[77,25,61,25],[77,27,61,27],[77,28,61,28],[78,4,62,4,"buf"],[78,7,62,7],[78,8,62,8,"offset"],[78,14,62,14],[78,16,62,16],[78,17,62,17],[78,20,62,20,"rnds"],[78,24,62,24],[78,25,62,25],[78,27,62,27],[78,28,62,28],[79,4,63,4],[79,11,63,11,"buf"],[79,14,63,14],[80,2,64,0],[81,2,65,0],[81,6,65,0,"_default"],[81,14,65,0],[81,17,65,15,"v7"],[81,19,65,17],[82,0,65,18],[82,3]],"functionMap":{"names":["<global>","v7","updateV7State","v7Bytes"],"mappings":"AAA;ACG;CDY;OEC;CFc;AGC;CHgC"},"hasCjsExports":false},"type":"js/module"}]}